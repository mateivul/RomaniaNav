{"ast":null,"code":"var _jsxFileName = \"/Users/matei/Personal/Projects/C++/MapNav/RomaniaNav/v3_moldova_react/frontend/src/components/Map.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useMemo } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup, Polyline, useMap } from 'react-leaflet';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\n\n// Fix default marker icon in webpack/CRA\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconUrl: require('leaflet/dist/images/marker-icon.png'),\n  iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\n  shadowUrl: require('leaflet/dist/images/marker-shadow.png')\n});\nconst ROUTE_COLORS = ['#dc2626', '#059669', '#2563eb', '#7c3aed', '#ea580c', '#0891b2', '#4f46e5', '#be185d'];\nfunction FitBounds({\n  cities,\n  routes,\n  selectedRouteIndex\n}) {\n  _s();\n  const map = useMap();\n  const bounds = useMemo(() => {\n    var _routes$selectedRoute;\n    const pts = [];\n    cities.forEach(c => pts.push([c.lat, c.lng]));\n    if (selectedRouteIndex != null && (_routes$selectedRoute = routes[selectedRouteIndex]) !== null && _routes$selectedRoute !== void 0 && _routes$selectedRoute.cities) {\n      routes[selectedRouteIndex].cities.forEach(c => pts.push([c.lat, c.lng]));\n    }\n    if (pts.length === 0) return null;\n    return L.latLngBounds(pts);\n  }, [cities, routes, selectedRouteIndex]);\n  React.useEffect(() => {\n    if (bounds) map.fitBounds(bounds, {\n      padding: [20, 20],\n      maxZoom: 10\n    });\n  }, [map, bounds]);\n  return null;\n}\n_s(FitBounds, \"iXnGoBA9IERqCM8LfdfeHENigQA=\", false, function () {\n  return [useMap];\n});\n_c = FitBounds;\nfunction Map({\n  cities,\n  routes,\n  selectedRouteIndex\n}) {\n  _s2();\n  const position = useMemo(() => {\n    if (cities.length) {\n      const lat = cities.reduce((s, c) => s + c.lat, 0) / cities.length;\n      const lng = cities.reduce((s, c) => s + c.lng, 0) / cities.length;\n      return [lat, lng];\n    }\n    return [47.2, 27.0];\n  }, [cities]);\n  return /*#__PURE__*/_jsxDEV(MapContainer, {\n    center: position,\n    zoom: 8,\n    className: \"h-full w-full\",\n    scrollWheelZoom: true,\n    children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n      attribution: \"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a>\",\n      url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(FitBounds, {\n      cities: cities,\n      routes: routes,\n      selectedRouteIndex: selectedRouteIndex\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), cities.map(city => /*#__PURE__*/_jsxDEV(Marker, {\n      position: [city.lat, city.lng],\n      icon: defaultIcon,\n      children: /*#__PURE__*/_jsxDEV(Popup, {\n        children: city.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }, this)\n    }, city.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }, this)), routes.map((route, idx) => {\n      const positions = (route.cities || []).map(c => [c.lat, c.lng]);\n      const isSelected = idx === selectedRouteIndex;\n      const color = ROUTE_COLORS[idx % ROUTE_COLORS.length];\n      return /*#__PURE__*/_jsxDEV(Polyline, {\n        positions: positions,\n        pathOptions: {\n          color,\n          weight: isSelected ? 6 : 3,\n          opacity: isSelected ? 1 : 0.6\n        },\n        eventHandlers: {\n          click: () => {}\n        }\n      }, idx, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 11\n      }, this);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n}\n_s2(Map, \"qiXue+BCZOYYC/Vhk9wV9U6HvI4=\");\n_c2 = Map;\nexport default Map;\nvar _c, _c2;\n$RefreshReg$(_c, \"FitBounds\");\n$RefreshReg$(_c2, \"Map\");","map":{"version":3,"names":["React","useMemo","MapContainer","TileLayer","Marker","Popup","Polyline","useMap","L","jsxDEV","_jsxDEV","Icon","Default","prototype","_getIconUrl","mergeOptions","iconUrl","require","iconRetinaUrl","shadowUrl","ROUTE_COLORS","FitBounds","cities","routes","selectedRouteIndex","_s","map","bounds","_routes$selectedRoute","pts","forEach","c","push","lat","lng","length","latLngBounds","useEffect","fitBounds","padding","maxZoom","_c","Map","_s2","position","reduce","s","center","zoom","className","scrollWheelZoom","children","attribution","url","fileName","_jsxFileName","lineNumber","columnNumber","city","icon","defaultIcon","name","id","route","idx","positions","isSelected","color","pathOptions","weight","opacity","eventHandlers","click","_c2","$RefreshReg$"],"sources":["/Users/matei/Personal/Projects/C++/MapNav/RomaniaNav/v3_moldova_react/frontend/src/components/Map.jsx"],"sourcesContent":["import React, { useMemo } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup, Polyline, useMap } from 'react-leaflet';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\n\n// Fix default marker icon in webpack/CRA\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconUrl: require('leaflet/dist/images/marker-icon.png'),\n  iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\n  shadowUrl: require('leaflet/dist/images/marker-shadow.png'),\n});\n\nconst ROUTE_COLORS = ['#dc2626', '#059669', '#2563eb', '#7c3aed', '#ea580c', '#0891b2', '#4f46e5', '#be185d'];\n\nfunction FitBounds({ cities, routes, selectedRouteIndex }) {\n  const map = useMap();\n  const bounds = useMemo(() => {\n    const pts = [];\n    cities.forEach((c) => pts.push([c.lat, c.lng]));\n    if (selectedRouteIndex != null && routes[selectedRouteIndex]?.cities) {\n      routes[selectedRouteIndex].cities.forEach((c) => pts.push([c.lat, c.lng]));\n    }\n    if (pts.length === 0) return null;\n    return L.latLngBounds(pts);\n  }, [cities, routes, selectedRouteIndex]);\n  React.useEffect(() => {\n    if (bounds) map.fitBounds(bounds, { padding: [20, 20], maxZoom: 10 });\n  }, [map, bounds]);\n  return null;\n}\n\nfunction Map({ cities, routes, selectedRouteIndex }) {\n  const position = useMemo(() => {\n    if (cities.length) {\n      const lat = cities.reduce((s, c) => s + c.lat, 0) / cities.length;\n      const lng = cities.reduce((s, c) => s + c.lng, 0) / cities.length;\n      return [lat, lng];\n    }\n    return [47.2, 27.0];\n  }, [cities]);\n\n  return (\n    <MapContainer\n      center={position}\n      zoom={8}\n      className=\"h-full w-full\"\n      scrollWheelZoom\n    >\n      <TileLayer\n        attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a>'\n        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      />\n      <FitBounds cities={cities} routes={routes} selectedRouteIndex={selectedRouteIndex} />\n      {cities.map((city) => (\n        <Marker key={city.id} position={[city.lat, city.lng]} icon={defaultIcon}>\n          <Popup>{city.name}</Popup>\n        </Marker>\n      ))}\n      {routes.map((route, idx) => {\n        const positions = (route.cities || []).map((c) => [c.lat, c.lng]);\n        const isSelected = idx === selectedRouteIndex;\n        const color = ROUTE_COLORS[idx % ROUTE_COLORS.length];\n        return (\n          <Polyline\n            key={idx}\n            positions={positions}\n            pathOptions={{\n              color,\n              weight: isSelected ? 6 : 3,\n              opacity: isSelected ? 1 : 0.6,\n            }}\n            eventHandlers={{\n              click: () => {},\n            }}\n          />\n        );\n      })}\n    </MapContainer>\n  );\n}\n\nexport default Map;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}