{"ast":null,"code":"import React,{useState,useEffect}from'react';import{getCities,getHealth,calculateRoutes}from'./api/backend';import Map from'./components/Map';import Controls from'./components/Controls';import RouteList from'./components/RouteList';import RouteDetails from'./components/RouteDetails';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[cities,setCities]=useState([]);const[routes,setRoutes]=useState([]);const[selectedRouteIndex,setSelectedRouteIndex]=useState(null);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[backendOnline,setBackendOnline]=useState(false);useEffect(()=>{getHealth().then(()=>setBackendOnline(true)).catch(()=>setBackendOnline(false));getCities().then(res=>setCities(res.data)).catch(()=>setError('Nu s-au putut încărca orașele.'));},[]);const handleCalculate=(source,destination)=>{setError(null);setRoutes([]);setSelectedRouteIndex(null);setLoading(true);calculateRoutes(source,destination).then(res=>{var _res$data$routes;setRoutes(res.data.routes||[]);if((_res$data$routes=res.data.routes)!==null&&_res$data$routes!==void 0&&_res$data$routes.length)setSelectedRouteIndex(0);setLoading(false);}).catch(err=>{var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||'Eroare la calculul traseelor.');setLoading(false);});};const selectedRoute=selectedRouteIndex!=null&&routes[selectedRouteIndex]?routes[selectedRouteIndex]:null;return/*#__PURE__*/_jsxs(\"div\",{className:\"h-screen flex flex-col bg-gray-100\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"bg-emerald-700 text-white px-4 py-2 flex items-center justify-between shadow\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-bold\",children:\"Moldova Navigator\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm px-2 py-0.5 rounded \".concat(backendOnline?'bg-green-500':'bg-red-500'),children:backendOnline?'Online':'Offline'})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-100 border border-red-400 text-red-700 px-4 py-2 text-sm\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 flex min-h-0\",children:[/*#__PURE__*/_jsxs(\"aside\",{className:\"w-80 flex flex-col bg-white border-r shadow-sm overflow-hidden\",children:[/*#__PURE__*/_jsx(Controls,{cities:cities,onCalculate:handleCalculate,loading:loading}),/*#__PURE__*/_jsx(RouteList,{routes:routes,selectedIndex:selectedRouteIndex,onSelectRoute:setSelectedRouteIndex})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"flex-1 flex min-h-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 min-w-0\",children:/*#__PURE__*/_jsx(Map,{cities:cities,routes:routes,selectedRouteIndex:selectedRouteIndex})}),selectedRoute&&/*#__PURE__*/_jsx(\"aside\",{className:\"w-72 bg-white border-l shadow-sm overflow-y-auto\",children:/*#__PURE__*/_jsx(RouteDetails,{route:selectedRoute})})]})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","getCities","getHealth","calculateRoutes","Map","Controls","RouteList","RouteDetails","jsx","_jsx","jsxs","_jsxs","App","cities","setCities","routes","setRoutes","selectedRouteIndex","setSelectedRouteIndex","loading","setLoading","error","setError","backendOnline","setBackendOnline","then","catch","res","data","handleCalculate","source","destination","_res$data$routes","length","err","_err$response","_err$response$data","response","selectedRoute","className","children","concat","onCalculate","selectedIndex","onSelectRoute","route"],"sources":["/Users/matei/Personal/Projects/C++/MapNav/RomaniaNav/v3_moldova_react/frontend/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { getCities, getHealth, calculateRoutes } from './api/backend';\nimport Map from './components/Map';\nimport Controls from './components/Controls';\nimport RouteList from './components/RouteList';\nimport RouteDetails from './components/RouteDetails';\n\nfunction App() {\n  const [cities, setCities] = useState([]);\n  const [routes, setRoutes] = useState([]);\n  const [selectedRouteIndex, setSelectedRouteIndex] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [backendOnline, setBackendOnline] = useState(false);\n\n  useEffect(() => {\n    getHealth()\n      .then(() => setBackendOnline(true))\n      .catch(() => setBackendOnline(false));\n    getCities()\n      .then((res) => setCities(res.data))\n      .catch(() => setError('Nu s-au putut încărca orașele.'));\n  }, []);\n\n  const handleCalculate = (source, destination) => {\n    setError(null);\n    setRoutes([]);\n    setSelectedRouteIndex(null);\n    setLoading(true);\n    calculateRoutes(source, destination)\n      .then((res) => {\n        setRoutes(res.data.routes || []);\n        if (res.data.routes?.length) setSelectedRouteIndex(0);\n        setLoading(false);\n      })\n      .catch((err) => {\n        setError(err.response?.data?.error || 'Eroare la calculul traseelor.');\n        setLoading(false);\n      });\n  };\n\n  const selectedRoute = selectedRouteIndex != null && routes[selectedRouteIndex] ? routes[selectedRouteIndex] : null;\n\n  return (\n    <div className=\"h-screen flex flex-col bg-gray-100\">\n      <header className=\"bg-emerald-700 text-white px-4 py-2 flex items-center justify-between shadow\">\n        <h1 className=\"text-xl font-bold\">Moldova Navigator</h1>\n        <span\n          className={`text-sm px-2 py-0.5 rounded ${backendOnline ? 'bg-green-500' : 'bg-red-500'}`}\n        >\n          {backendOnline ? 'Online' : 'Offline'}\n        </span>\n      </header>\n\n      {error && (\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-2 text-sm\">\n          {error}\n        </div>\n      )}\n\n      <div className=\"flex-1 flex min-h-0\">\n        <aside className=\"w-80 flex flex-col bg-white border-r shadow-sm overflow-hidden\">\n          <Controls cities={cities} onCalculate={handleCalculate} loading={loading} />\n          <RouteList\n            routes={routes}\n            selectedIndex={selectedRouteIndex}\n            onSelectRoute={setSelectedRouteIndex}\n          />\n        </aside>\n        <main className=\"flex-1 flex min-h-0\">\n          <div className=\"flex-1 min-w-0\">\n            <Map cities={cities} routes={routes} selectedRouteIndex={selectedRouteIndex} />\n          </div>\n          {selectedRoute && (\n            <aside className=\"w-72 bg-white border-l shadow-sm overflow-y-auto\">\n              <RouteDetails route={selectedRoute} />\n            </aside>\n          )}\n        </main>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}