{"ast":null,"code":"import React,{useMemo}from'react';import{MapContainer,TileLayer,Marker,Popup,Polyline,useMap}from'react-leaflet';import L from'leaflet';import'leaflet/dist/leaflet.css';// Fix default marker icon in webpack/CRA\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";delete L.Icon.Default.prototype._getIconUrl;L.Icon.Default.mergeOptions({iconUrl:require('leaflet/dist/images/marker-icon.png'),iconRetinaUrl:require('leaflet/dist/images/marker-icon-2x.png'),shadowUrl:require('leaflet/dist/images/marker-shadow.png')});const ROUTE_COLORS=['#dc2626','#059669','#2563eb','#7c3aed','#ea580c','#0891b2','#4f46e5','#be185d'];function FitBounds(_ref){let{cities,routes,selectedRouteIndex}=_ref;const map=useMap();const bounds=useMemo(()=>{var _routes$selectedRoute;const pts=[];cities.forEach(c=>pts.push([c.lat,c.lng]));if(selectedRouteIndex!=null&&(_routes$selectedRoute=routes[selectedRouteIndex])!==null&&_routes$selectedRoute!==void 0&&_routes$selectedRoute.cities){routes[selectedRouteIndex].cities.forEach(c=>pts.push([c.lat,c.lng]));}if(pts.length===0)return null;return L.latLngBounds(pts);},[cities,routes,selectedRouteIndex]);React.useEffect(()=>{if(bounds)map.fitBounds(bounds,{padding:[20,20],maxZoom:10});},[map,bounds]);return null;}function Map(_ref2){let{cities,routes,selectedRouteIndex}=_ref2;const position=useMemo(()=>{if(cities.length){const lat=cities.reduce((s,c)=>s+c.lat,0)/cities.length;const lng=cities.reduce((s,c)=>s+c.lng,0)/cities.length;return[lat,lng];}return[47.2,27.0];},[cities]);return/*#__PURE__*/_jsxs(MapContainer,{center:position,zoom:8,className:\"h-full w-full\",scrollWheelZoom:true,children:[/*#__PURE__*/_jsx(TileLayer,{attribution:\"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a>\",url:\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"}),/*#__PURE__*/_jsx(FitBounds,{cities:cities,routes:routes,selectedRouteIndex:selectedRouteIndex}),cities.map(city=>/*#__PURE__*/_jsx(Marker,{position:[city.lat,city.lng],children:/*#__PURE__*/_jsx(Popup,{children:city.name})},city.id)),routes.map((route,idx)=>{const positions=(route.cities||[]).map(c=>[c.lat,c.lng]);const isSelected=idx===selectedRouteIndex;const color=ROUTE_COLORS[idx%ROUTE_COLORS.length];return/*#__PURE__*/_jsx(Polyline,{positions:positions,pathOptions:{color,weight:isSelected?6:3,opacity:isSelected?1:0.6},eventHandlers:{click:()=>{}}},idx);})]});}export default Map;","map":{"version":3,"names":["React","useMemo","MapContainer","TileLayer","Marker","Popup","Polyline","useMap","L","jsx","_jsx","jsxs","_jsxs","Icon","Default","prototype","_getIconUrl","mergeOptions","iconUrl","require","iconRetinaUrl","shadowUrl","ROUTE_COLORS","FitBounds","_ref","cities","routes","selectedRouteIndex","map","bounds","_routes$selectedRoute","pts","forEach","c","push","lat","lng","length","latLngBounds","useEffect","fitBounds","padding","maxZoom","Map","_ref2","position","reduce","s","center","zoom","className","scrollWheelZoom","children","attribution","url","city","name","id","route","idx","positions","isSelected","color","pathOptions","weight","opacity","eventHandlers","click"],"sources":["/Users/matei/Personal/Projects/C++/MapNav/RomaniaNav/v3_moldova_react/frontend/src/components/Map.jsx"],"sourcesContent":["import React, { useMemo } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup, Polyline, useMap } from 'react-leaflet';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\n\n// Fix default marker icon in webpack/CRA\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconUrl: require('leaflet/dist/images/marker-icon.png'),\n  iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\n  shadowUrl: require('leaflet/dist/images/marker-shadow.png'),\n});\n\nconst ROUTE_COLORS = ['#dc2626', '#059669', '#2563eb', '#7c3aed', '#ea580c', '#0891b2', '#4f46e5', '#be185d'];\n\nfunction FitBounds({ cities, routes, selectedRouteIndex }) {\n  const map = useMap();\n  const bounds = useMemo(() => {\n    const pts = [];\n    cities.forEach((c) => pts.push([c.lat, c.lng]));\n    if (selectedRouteIndex != null && routes[selectedRouteIndex]?.cities) {\n      routes[selectedRouteIndex].cities.forEach((c) => pts.push([c.lat, c.lng]));\n    }\n    if (pts.length === 0) return null;\n    return L.latLngBounds(pts);\n  }, [cities, routes, selectedRouteIndex]);\n  React.useEffect(() => {\n    if (bounds) map.fitBounds(bounds, { padding: [20, 20], maxZoom: 10 });\n  }, [map, bounds]);\n  return null;\n}\n\nfunction Map({ cities, routes, selectedRouteIndex }) {\n  const position = useMemo(() => {\n    if (cities.length) {\n      const lat = cities.reduce((s, c) => s + c.lat, 0) / cities.length;\n      const lng = cities.reduce((s, c) => s + c.lng, 0) / cities.length;\n      return [lat, lng];\n    }\n    return [47.2, 27.0];\n  }, [cities]);\n\n  return (\n    <MapContainer\n      center={position}\n      zoom={8}\n      className=\"h-full w-full\"\n      scrollWheelZoom\n    >\n      <TileLayer\n        attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a>'\n        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      />\n      <FitBounds cities={cities} routes={routes} selectedRouteIndex={selectedRouteIndex} />\n      {cities.map((city) => (\n        <Marker key={city.id} position={[city.lat, city.lng]}>\n          <Popup>{city.name}</Popup>\n        </Marker>\n      ))}\n      {routes.map((route, idx) => {\n        const positions = (route.cities || []).map((c) => [c.lat, c.lng]);\n        const isSelected = idx === selectedRouteIndex;\n        const color = ROUTE_COLORS[idx % ROUTE_COLORS.length];\n        return (\n          <Polyline\n            key={idx}\n            positions={positions}\n            pathOptions={{\n              color,\n              weight: isSelected ? 6 : 3,\n              opacity: isSelected ? 1 : 0.6,\n            }}\n            eventHandlers={{\n              click: () => {},\n            }}\n          />\n        );\n      })}\n    </MapContainer>\n  );\n}\n\nexport default Map;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}